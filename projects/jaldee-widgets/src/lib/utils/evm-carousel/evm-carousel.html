<div 
  class="evm-carousel-wrapper"
  [class.center-mode]="config.center"
  role="listbox"
>

  <button
    *ngIf="config.showNav"
    class="nav prev"
    (click)="prev()"
    aria-label="Previous slide"
  >
    ‹
  </button>

  <div
    class="evm-carousel-stage"
    #stage
    [style.transform]="getTransform()"
    [style.padding]="'0 ' + (config.stagePadding || 0) + 'px'"
    [style.transition]="transitionStyle"
    (pointerdown)="onPointerDown($event)"
    (pointermove)="onPointerMove($event)"
    (pointerup)="onPointerUp($event)"
    (pointercancel)="onPointerCancel($event)"
  >

    <div
      class="evm-carousel-item"
      *ngFor="let item of renderedItems; let idx = index"
      [style.flex]="getFlex()"
      [style.padding.px]="config.itemPadding ?? 0"
      [style.transform]="'scale(' + getItemScale(idx) + ')'"
      [style.opacity]="getItemScale(idx) === 1 ? 1 : 0.6"
      role="option"
      [attr.aria-selected]="currentIndex === idx"
    >
<ng-container
  *ngTemplateOutlet="userTemplate || defaultTemplate; context: {$implicit: item, index: idx}"
></ng-container>
    </div>

  </div>

  <button
    *ngIf="config.showNav"
    class="nav next"
    (click)="next()"
    aria-label="Next slide"
  >
    ›
  </button>

  <div class="dots" *ngIf="config.showDots && !config.center">
    <span
      *ngFor="let item of items; let idx = index"
      [class.active]="idx === currentIndex"
      (click)="goTo(idx)"
    ></span>
  </div>

</div>
